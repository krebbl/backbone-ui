<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>BackboneUI</title>
		<style>
			body {
				font-size: 16px;
				line-height: 24px;
				background: #FEF3CA;
				color: #022;
				height: 100%;
				font-family: "Palatino Linotype", "Book Antiqua", Palatino, FreeSerif, serif;
			}
			div.container {
				width: 720px;
				margin: 50px 0 50px 50px;
			}
			p, li {
				margin: 16px 0 16px 0;
				width: 550px;
			}
			p.break {
				margin-top: 35px;
			}
			ol {
				padding-left: 24px;
			}
			ol li {
				font-weight: bold;
				margin-left: 0;
			}
			a, a:visited {
				padding: 0 2px;
				text-decoration: none;
				background: #f0c095;
				color: #252519;
			}
			a:active, a:hover {
				color: #FFF;
				background: #C25D00;
			}
			h1, h2, h3, h4, h5, h6 {
				margin-top: 40px;
			}
			b.header {
				font-size: 18px;
			}
			span.alias {
				font-size: 14px;
				font-style: italic;
				margin-left: 20px;
			}
			table {
				margin: 16px 0;
				padding: 0;
			}
			tr, td, th {
				margin: 0;
				padding: 0;
				text-align: left;
			}
			th {
				padding: 24px 0 0;
			}
			tr:first-child th {
				padding-top: 0;
			}
			td {
				padding: 6px 15px 6px 0;
			}
			td.definition {
				line-height: 18px;
				font-size: 14px;
			}
			table.downloads td {
				padding-left: 18px;
			}
			.demo-hint {
				font-size: 13px;
				margin: 0 0 12px 12px;
				font-weight: normal;
			}
			#VS code, #VS pre, #VS tt {
				font-family: Monaco, Consolas, "Lucida Console", monospace;
				font-size: 12px;
				line-height: 18px;
				color: #444;
				background: none;
			}
			#VS code {
				margin-left: 8px;
				padding: 0 0 0 12px;
				font-weight: normal;
			}
			#VS pre {
				font-size: 12px;
				padding: 2px 0 2px 0;
				border-left: 6px solid #829C37;
				margin: 12px 0;
			}
			#search_query {
				margin: 18px 0;
				opacity: 0;
			}
			#search_query .raquo {
				font-size: 18px;
				line-height: 12px;
				font-weight: bold;
				margin-right: 4px;
			}
			#search_query2 {
				margin: 18px 0;
				opacity: 0;
			}
			#search_query2 .raquo {
				font-size: 18px;
				line-height: 12px;
				font-weight: bold;
				margin-right: 4px;
			}
			.main {
				background: yellow;
			}
		</style>
		<link rel="stylesheet" href="lib/css/ui.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="lib/css/slick.grid.css" type="text/css" media="screen" charset="utf-8">
		<link rel="stylesheet" href="lib/css/jquery.qtip.min.css" type="text/css" media="screen" charset="utf-8">
		<script src="vendor/jquery-1.7.js" type="text/javascript" charset="utf-8"></script>
		<!-- <script src="vendor/backported/jquery-1.4.4.js" type="text/javascript" charset="utf-8"></script> -->
		<script src="vendor/jquery.ui.core.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/jquery.ui.widget.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/jquery.ui.position.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/jquery.ui.autocomplete.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/jquery-ui-1.8.16.custom.min.js" type="text/javascript" charset="UTF-8"></script>
		<script src="vendor/underscore.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/backbone.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/date.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/slickgrid/jquery.event.drag-2.0.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/slickgrid/slick.grid.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/slickgrid/slick.model.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/slickgrid/slick.rowselectionmodel.js" type="text/javascript" charset="utf-8"></script>
		<script src="vendor/jquery.qtip.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/templates/templates.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/ui.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/utils/binding.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/utils/locale.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/mixins/loading_mask.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/scroll_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/list_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/container_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/split_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/workspace_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/slick_grid_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/segmented_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/tab_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/button_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/link_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/model_errors_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fieldset_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/text_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/textarea_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/date_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/checkbox_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/select_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/fields/radiobox_field_view.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/js/views/dialog_view.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div class="container" id="UI">
			<h1><a href="demo.html">BackboneUI</a></h1>
			
			<h2 id="demo">A View with attribute Binding <span class="demo-hint"><i>All changes to the bound model attributes are automatically propagated to the view</i></span></h2>
			<div id="view-container" style="height: 150px;"></div>
			<script type="text/javascript" charset="utf-8">
				$(document).ready(function() {

					var model = new Backbone.Model({
						visible : true,
						elements : ["Adam", "Bob", "Charlie", "David", "Evan"]
					});

					var view = new UI.View({
						fitLayout : true,
						className : 'main',
						container : $('#view-container'),
						visibleBinding : new UI.Binding({
							model : model,
							key : "elements",
							transform : function(val) {
								return (val.length % 2 == 1)
							}
						}),
						innerHTMLBinding : new UI.Binding({
							model : model,
							key : "elements"
						}),
						htmlRenderer : function(values) {
							return "<h4>The Gang of " + values.length + "</h4><p>" + values.join(", ") + "</p>";
						}
					})

					view.render();

					setInterval(function() {
						var elements = model.get('elements');
						if(elements.length < 7)
							elements.push('Peter');
						model.unset('elements', {
							silent : true
						});
						model.set({
							elements : elements
						});
					}, 3000);
				});

			</script>
			<h2>ScrollView with ListView</h2>
			<div id="scroll-view-container" style="height: 150px;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						items : ["Adam", "Bob", "Charlie", "David", "Erwin", "Frida", "Guy"],
						itemToView : function(item) {
							return new UI.View({
								height : 30,
								className : item,
								innerHTML : item
							})
						}
					});
					var view = new UI.ScrollView({
						fitLayout : true,
						className : 'main',
						container : $('#scroll-view-container'),
						contentView : listView
					})

					view.render();

					setInterval(function() {
						if(listView.getSize() < 10) {
							listView.addItem("Peter");
						}
					}, 2000)
				});

			</script>
			<h2>SplitView with a ScrollView and a SlickGridView (SlickGrid) <span class="demo-hint"><i>For more config options look at SlickGrid page</i></span></h2>
			<div id="split-view-container" style="height: 400px;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						items : ["Adam", "Bob", "Charlie", "David", "Erwin", "Frida", "Guy"],
						itemToView : function(item) {
							return new UI.View({
								height : 30,
								className : item,
								innerHTML : item
							})
						}
					});
					var scrollView = new UI.ScrollView({
						className : 'main',
						contentView : listView,
						callbacks : {
							'scrollBottom' : function() {
								alert("Reached Bottom");
							},
							'scrollTop' : function() {
								alert("Reached Top");
							}
						}
					})

					var tableView = new UI.SlickGridView({
						container : $('#split-view-container').resizable(),
						columns : [{
							id : 'id',
							field : 'id',
							name : 'id',
							width : 50
						}, {
							id : 'firstname',
							field : 'firstname',
							name : 'Firstname',
							sortable : true,
							width : 150
						}, {
							id : 'lastname',
							field : 'lastname',
							name : 'Lastname',
							sortable : true,
							width : 150
						}],
						items : [{
							id : 1,
							firstname : 'Bob',
							lastname : 'Dylan'
						}, {
							id : 2,
							firstname : 'Charlie',
							lastname : 'Sheen'
						}, {
							id : 3,
							firstname : 'David',
							lastname : 'Duchovny'
						}]

					});

					var view = new UI.SplitView({
						fitLayout : true,
						container : $('#split-view-container').resizable(),
						leftView : scrollView,
						rightView : tableView,
						resizable : true
					})

					view.render();

				});

			</script>
			<h2>WorkspaceView with a ScrollView as ContentView</h2>
			<div id="tab-view-container" style="height: auto;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						items : ["Adam", "Bob", "Charlie", "David", "Erwin", "Frida", "Guy"],
						itemToView : function(item) {
							return new UI.View({
								height : 30,
								className : item,
								innerHTML : item
							})
						}
					});
					var view = new UI.ScrollView({
						fitLayout : true,
						className : 'main',
						title : 'A Scroll View',
						contentView : listView
					})

					var tabView = new UI.TabView({
						fitLayout : true,
						container : $("#tab-view-container"),
						tabViews : [new UI.View({
							title : 'Tab1',
							innerHTML : 'Tab Content'
						}), view, new UI.View({
							title : 'Tab3',
							innerHTML : 'Tab Content 3'
						})]
					});

					tabView.render();
				});

			</script>
			<h2>WorkspaceView with a ScrollView as ContentView</h2>
			<div id="workspace-view-container" style="height: 300px;"></div>
			<script>
				$(document).ready(function() {
					var items = ["Adam", "Bob", "Charlie", "David", "Erwin", "Frida", "Guy"];
					var items2 = ["Anna", "Beatrice", "Caroline", "Denis", "Elsa"];
					
					var collection = new Backbone.Collection();
					_.each(items, function(item) {
						collection.add({
							name : item
						});
					});
					
					var collection2 = new Backbone.Collection();
					_.each(items2, function(item) {
						collection2.add({
							name : item
						});
					});
					
					var cModel = new Backbone.Model({selected: collection});
					
					var listView = new UI.ListView({
						collectionBinding : new UI.Binding({model: cModel, key: 'selected'}),
						itemToView : function(item) {
							return new UI.View({
								height : 30,
								className : item.get('name'),
								innerHTML : item.get('name')
							})
						}
					});
					var scrollView = new UI.ScrollView({
						fitLayout : true,
						className : 'main',
						contentView : listView
					})

					var view = new UI.WorkspaceView({
						container : $('#workspace-view-container').resizable(),
						topView : new UI.View({
							innerHTML : "TOP"
						}),
						contentView : scrollView,
						bottomView : new UI.View({
							innerHTML : "BOTTOM"
						})
					})

					view.render();

					collection.add({
						name : 'Marcus'
					});
					
					setInterval(function(){
						var sel = cModel.get('selected');
						if(sel == collection){
							cModel.set({selected: collection2})	
						}else{
							cModel.set({selected: collection})
						}
					},5000)
				});

			</script>
			<h2>ListView with ButtonViews</h2>
			<div id="button-view-container" style="height: 100px;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						multiSelect : false,
						needsSelection : true,
						className : 'button-list',
						container : $('#button-view-container'),
						items : ["Adam", "Bob", "Charlie", "David"],
						itemToView : function(item) {
							return new UI.ButtonView({
								selected : false,
								iconClass : 'icon-person',
								className : 'example-button',
								label : item,
								callbacks : {
									click : function() {
										// alert('click')
									}
								},
								selectable: true
							})
						},
						callbacks : {
							selectionChanged : function(views) {

							}
						}
					});

					listView.render();
				});

			</script>
			<h2>ListView with LinkViews</h2>
			<div id="link-view-container" style="height: 100px;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						className : 'link-list',
						container : $('#link-view-container'),
						items : ["http://documentcloud.github.com/underscore/", "http://documentcloud.github.com/backbone/"],
						itemToView : function(item) {
							return new UI.LinkView({
								selected : false,
								iconClass : 'icon-person',
								className : 'example-link',
								label : item,
								href : item
							})
						}
					});

					listView.render();
				});

			</script>
			<h2>ListView with LinkViews and a DropDownMenu</h2>
			<div id="link-view2-container" style="height: auto;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						className : 'navigation-bar',
						container : $('#link-view2-container'),
						items : ["Link1", "Link2", "Link3"],
						itemToView : function(item) {
							if(item == "Link3") {
								return new UI.LinkView({
									selected : false,
									className : 'dropdown-menu',
									label : item,
									menuView : new UI.ListView({
										childViews : [new UI.LinkView({
											label : 'Option 1',
											callbacks : {
												click : function() {alert('Option1')
												}
											}
										}), new UI.LinkView({
											label : 'Option 2',
											callbacks : {
												click : function() {alert('option2')
												}
											}
										})]
									})
								})
							} else {
								return new UI.LinkView({
									selected : false,
									className : 'nav-link',
									label : item,
									selectable: true
								})
							}

						}
					});

					listView.render();
				});

			</script>
			<h2>A List of all FieldViews</h2>
			<div id="field-list-container" style="height: auto;"></div>
			<script>
				$(document).ready(function() {
					var ExampleModel = Backbone.Model.extend({
						validate : function(attrs) {
							console.log("validate");
							if(!attrs)
								return {};
							if(!this.errors)
								this.errors = {};
							if(!_.isUndefined(attrs["username"])) {
								if(attrs.username.length == 0)
									this.errors["username"] = "can't be blank";
								else
									delete (this.errors['username']);
							}
							if(!_.isUndefined(attrs["password"])) {
								if(attrs.password.length == 0)
									this.errors["password"] = "can't be blank";
								else
									delete (this.errors['password']);
							}
							//  trigger the error event, also if there are no errors, so the view gets updated
							this.trigger('error', this, this.errors);
						}
					})
					var model = new ExampleModel({
						username : 'Marcus',
						password : 'admin',
						likes : [1, 3],
						wants : 1,
						hasCar : false,
						carName : null,
						memo : "My awesome text"
					});

					var listView = new UI.ListView({
						className : 'field-list',
						container : $('#field-list-container'),
						items : ["status", "username", "password", "memo", "date", "select", "likes", "wants", "hasCar", "carName", "button"],
						itemToView : function(item) {
							if(item == "status") {
								return new UI.View({
									visibleBinding : new UI.Binding({
										model : model,
										event : "error",
										transform : function(error, model) {
											return !_.isUndefined(error) && _.size(error) > 0
										}
									}),
									innerHTMLBinding : new UI.Binding({
										model : model,
										event : "error"
									}),
									htmlRenderer : function(error, model) {
										if(_.isUndefined(error))
											return "";
										return _.size(error) + " Errors";
									}
								})
							} else if(item == "username") {
								return new UI.TextFieldView({
									enable : true,
									label : 'Text',
									model : model,
									field : 'username',
									error : "Sample Error"
								})
							} else if(item == "password") {
								return new UI.TextFieldView({
									label : 'Password',
									model : model,
									field : 'password',
									type : 'password'
								})
							} else if(item == "memo") {
								return new UI.TextareaFieldView({
									label : 'Memo',
									model : model,
									field : 'memo'
								})
							} else if(item == "date") {
								return new UI.DateFieldView({
									label : 'Date',
									value : "2011-12-12"
								})
							} else if(item == "select") {
								return new UI.SelectFieldView({
									label : 'Select',
									multiSelect : false,
									value : 1,
									items : [{
										value : 0,
										label : 'Option 1'
									}, {
										value : 1,
										label : 'Option 2'

									}, {
										value : 2,
										label : 'Option 3'
									}]
								})

							} else if(item == "likes") {
								return new UI.CheckboxFieldView({
									label : 'Likes',
									model : model,
									field : 'likes',
									items : [{
										value : 1,
										label : "First Checkbox"
									}, {
										value : 2,
										label : "Second Checkbox"
									}, {
										value : 3,
										label : "Third Checkbox"
									}]
								})

							} else if(item == "wants") {
								return new UI.RadioboxFieldView({
									label : 'Wants',
									model : model,
									field : 'wants',
									items : [{
										value : 1,
										label : "First Radiobox"
									}, {
										value : 2,
										label : "Second Radiobox"
									}, {
										value : 3,
										label : "Third Radiobox"
									}]
								})
							} else if(item == "hasCar") {
								return new UI.CheckboxFieldView({
									multiSelect : false,
									label : 'Has Car?',
									model : model,
									silentChange : false,
									field : 'hasCar',
									items : [{
										value : true,
										label : 'YES'
									}],
									callbacks : {
										valueChanged : function(view) {
											if(view.model.get('hasCar')) {
												// alert("has a car");
											} else {
												// alert("has no car");
											}
										}
									}
								});
							} else if(item == "carName") {
								return new UI.TextFieldView({
									label : 'Car',
									model : model,
									field : 'carName',
									unsetOnDisable : true,
									enableBinding : new UI.Binding({
										model : model,
										key : 'hasCar'
									})
								})
							} else if(item == "button") {
								return new UI.ContainerView({
									childViews : [new UI.ButtonView({
										label : 'Change Model Name',
										callbacks : {
											'click' : function() {
												model.set({
													username : 'Peter',
													password : 'secret',
													likes : [3]
												});
											}
										}
									})]
								})

							}
							return new UI.View({});
						}
					});

					listView.render();
				});

			</script>
			<h2>DialogView</h2>
			<div id="dialog-button-container" style="height: auto;"></div>
			<script>
				$(document).ready(function() {
					var listView = new UI.ListView({
						className : 'horizontal',
						container : $('#dialog-button-container'),
						items : [{
							title : "Modal Dialog",
							dialog : new UI.DialogView({
								className : 'dialog',
								modal : true,
								contentView : new UI.View({
									innerHTML : 'Dialog Example'
								})
							})
						}, {
							title : "Normal Dialog",
							dialog : new UI.DialogView({
								className : 'dialog',
								modal : false,
								contentView : new UI.View({
									innerHTML : 'Dialog Example'
								})
							})
						}, {
							title : 'Confirm'
						}, {
							title : 'Alert'
						}, {
							title : 'Info'

						}],
						itemToView : function(item) {
							return new UI.ButtonView({
								className : 'field-list',
								callbacks : {
									click : function() {
										if(item.title == "Confirm") {
											UI.DialogView.confirm("Confirm", "Do you really want to do this?", function(yes) {alert(yes)
											})
										} else if(item.title == "Alert") {
											UI.DialogView.alert("Alert", "You can't do this!", function() {alert("Closed")
											})
										} else if(item.title == "Info") {
											UI.DialogView.info("Info", "That's awesome!", function() {alert("Closed")
											})
										} else {
											item.dialog.open();
										}

									}
								},
								label : 'Show ' + item.title
							})

						}
					});

					listView.render();
				});

			</script>
		</div>
	</body>
</html>
